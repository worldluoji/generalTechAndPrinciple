1. 手动配置IP
net-tools
$ sudo ifconfig eth1 10.0.0.1/24
$ sudo ifconfig eth1 up

ip-route2
$ sudo ip addr add 10.0.0.1/24 dev eth1
$ sudo ip link set up eth1

2. 192.168.1.6 就在你这台机器的旁边，甚至是在同一个交换机上，而你把机器的地址设为了 16.158.23.6。
在这台机器上，你企图去 ping 192.168.1.6，发现根本不通。
Linux 首先会判断，要去的这个地址和我是一个网段的吗，或者和我的一个网卡是同一网段的吗？只有是一个网段的，它才会发送 ARP 请求，获取 MAC 地址。
如果发现不是，Linux 默认的逻辑是，如果这是一个跨网段的调用，它便不会直接将包发送到网络上，而是企图将包发送到网关。
所以即使是同一个交换机上两个网段不同的机器也通不了。
交换机是一个二层设备，就需要将mac头取下，看是不是自己，但是现在包是发到网关的，也顶多通过arp获取网关的mac地址了。

3. 为了解决手动配置IP冲突等问题，或上面2中对于计算机网络理解不到位配置错误等问题，减少出错，就有了DHCP，
即动态主机配置协议（Dynamic Host Configuration Protocol）
他只需要配置一段共享的 IP 地址。每一台新接入的机器都通过 DHCP 协议，来这个共享的 IP 地址里申请，
然后自动配置好就可以了。等人走了，或者用完了，还回去，这样其他的机器也能用。
如果是数据中心里面的服务器，IP 一旦配置好，基本不会变，这就相当于买房自己装修。
DHCP 的方式就相当于租房。你不用装修，都是帮你配置好的。你暂时用一下，用完退租就可以了。
线程池、对象池不也就是这个思路吗？

4. DHCP流程
DHCP Discover
新来的机器使用 IP 地址 0.0.0.0 发送了一个广播包，目的 IP 地址为 255.255.255.255。
广播包封装了 UDP，UDP 封装了 BOOTP。其实 DHCP 是 BOOTP 的增强版，但是如果你去抓包的话，很可能看到的名称还是 BOOTP 协议。
在这个广播包里面，新人大声喊：我是新来的（Boot request），我的 MAC 地址是这个，我还没有 IP，谁能给租给我个 IP 地址！

DHCP Offer
只有 MAC 唯一，IP 管理员才能知道这是一个新人，需要租给它一个 IP 地址，这个过程我们称为 DHCP Offer。
同时，DHCP Server 为此客户保留为它提供的 IP 地址，从而不会为其他 DHCP 客户分配此 IP 地址。
如果有多个 DHCP Server，这台新机器会收到多个 IP 地址。

DHCP Request
它会选择其中一个 DHCP Offer，一般是最先到达的那个，并且会向网络发送一个 DHCP Request 广播数据包，
包中包含客户端的 MAC 地址、接受的租约中的 IP 地址、提供此租约的 DHCP 服务器地址等，
并告诉所有 DHCP Server 它将接受哪一台服务器提供的 IP 地址，告诉其他 DHCP 服务器，
谢谢你们的接纳，并请求撤销它们提供的 IP 地址。
DHCP Request究竟使用广播还是单播取决于DHCP Offer包中Broadcast位的设置值。
该位置1则使用广播发送，置0则使用单播发送。

DHCP Ack
当 DHCP Server 接收到客户机的 DHCP request 之后，会广播返回给客户机一个 DHCP ACK 消息包，
表明已经接受客户机的选择，并将这一 IP 地址的合法租用信息和其他的配置信息都放入该广播包，发给客户机，
欢迎它加入网络大家庭。

5. 收回和续租
收回：租期到了，管理员就要将 IP 收回。
续租：客户机会在租期过去 50% 的时候，直接向为其提供 IP 地址的 DHCP Server 发送 DHCP request 消息包。
客户机接收到该服务器回应的 DHCP ACK 消息包，会根据包中所提供的新的租期以及其他已经更新的 TCP/IP 参数，更新自己的配置。
这样，IP 租用更新就完成了。